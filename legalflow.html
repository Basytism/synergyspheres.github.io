<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Legal Drafting Generator | Synergyspheres</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/6.2.4/docx.min.js"></script>
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js';
    import { getDatabase, ref, set, onValue } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js';

    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT.firebaseio.com",
      projectId: "YOUR_PROJECT",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const clauseRef = ref(db, 'legaldrafting/clause');

    const previewEl = document.getElementById('preview');

    function syncFirebase(content) {
      set(clauseRef, content);
    }

    onValue(clauseRef, (snapshot) => {
      if (document.activeElement.id !== 'preview') {
        previewEl.textContent = snapshot.val() || '';
      }
    });
  </script>
</head>
<body class="bg-gray-100 font-sans">
  <header class="bg-indigo-800 text-white p-4 text-center font-bold text-xl shadow">Legal Drafting Generator – 🇵🇰 Pakistan Format</header>

  <main class="max-w-6xl mx-auto p-6">
    <div class="grid md:grid-cols-2 gap-6">

      <!-- Form Section -->
      <div class="bg-white rounded shadow p-4">
        <h2 class="text-lg font-semibold mb-4">📝 Enter Suit Details</h2>

        <label class="block mb-2 font-medium">Court Name</label>
        <input id="court" class="w-full p-2 border rounded" placeholder="In the Court of Senior Civil Judge, Multan">

        <label class="block mt-4 mb-2 font-medium">Case No</label>
        <input id="caseNo" class="w-full p-2 border rounded" placeholder="2025-CIV-001">

        <label class="block mt-4 mb-2 font-medium">Suit Type</label>
        <select id="suitType" class="w-full p-2 border rounded">
          <option value="Recovery of Money">Recovery of Money</option>
          <option value="Specific Performance">Specific Performance</option>
          <option value="Custody of Minor">Custody of Minor</option>
          <option value="Permanent Injunction">Permanent Injunction</option>
        </select>

        <label class="block mt-4 mb-2 font-medium">Plaintiff(s) Name (comma separated)</label>
        <input id="plaintiff" class="w-full p-2 border rounded" placeholder="Ahmed Khan, Ali Raza">

        <label class="block mt-4 mb-2 font-medium">Defendant(s) Name (comma separated)</label>
        <input id="defendant" class="w-full p-2 border rounded" placeholder="Zeeshan Malik, Kamran Shah">

        <label class="block mt-4 mb-2 font-medium">Cause of Action</label>
        <textarea id="cause" class="w-full p-2 border rounded" placeholder="On 12 June, Defendant failed to pay..." rows="3"></textarea>

        <label class="block mt-4 mb-2 font-medium">Relief Sought</label>
        <textarea id="relief" class="w-full p-2 border rounded" placeholder="Decree of Rs. 50,000 + costs..." rows="2"></textarea>

        <label class="block mt-4 mb-2 font-medium">Valuation & Court Fee</label>
        <input id="valuation" class="w-full p-2 border rounded" placeholder="Rs. 50,000">

        <label class="block mt-4 mb-2 font-medium">Lawyer Details</label>
        <input id="lawyer" class="w-full p-2 border rounded" placeholder="Advocate Asif Raza, License No. PK-1572">

        <label class="block mt-4 mb-2 font-medium">Date</label>
        <input type="date" id="date" class="w-full p-2 border rounded">

        <label class="block mt-4 mb-2 font-medium">Language</label>
        <select id="language" class="w-full p-2 border rounded">
          <option value="en">English</option>
          <option value="ur">اردو</option>
        </select>

        <div class="grid grid-cols-2 gap-2 mt-6">
          <button onclick="generatePreview()" class="bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700">🔍 Preview</button>
          <button onclick="clearForm()" class="bg-red-600 text-white p-2 rounded hover:bg-red-700">❌ Clear</button>
          <button onclick="downloadPDF()" class="bg-green-600 text-white p-2 rounded hover:bg-green-700 col-span-2">📄 Export PDF</button>
          <button onclick="downloadDOCX()" class="bg-yellow-600 text-white p-2 rounded hover:bg-yellow-700 col-span-2">📄 Export DOCX</button>
        </div>
      </div>

      <!-- Preview Section -->
      <div id="preview" class="bg-white p-6 rounded shadow overflow-auto whitespace-pre-wrap text-gray-900 text-sm" contenteditable="true">
        <em>Preview will appear here...</em>
      </div>
    </div>
  </main>

  <footer class="text-center text-gray-500 py-4 mt-8 border-t">Built with vision by @basytism • Synergyspheres 3.0</footer>

  <script>
    function clearForm() {
      document.querySelectorAll('input, textarea').forEach(el => el.value = '');
      document.getElementById('language').value = 'en';
      document.getElementById('preview').textContent = 'Preview will appear here...';
      syncFirebase('');
    }

    function downloadDOCX() {
      const doc = new window.docx.Document({
        sections: [{
          properties: {},
          children: [new window.docx.Paragraph({ text: document.getElementById('preview').textContent })]
        }]
      });
      window.docx.Packer.toBlob(doc).then(blob => {
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'LegalDraft_Pakistan.docx';
        link.click();
      });
    }
  </script>
</body><script>
function generatePreview() {
  const court = document.getElementById('court').value;
  const caseNo = document.getElementById('caseNo').value;
  const suitType = document.getElementById('suitType').value;
  const plaintiff = document.getElementById('plaintiff').value;
  const defendant = document.getElementById('defendant').value;
  const cause = document.getElementById('cause').value;
  const relief = document.getElementById('relief').value;
  const valuation = document.getElementById('valuation').value;
  const lawyer = document.getElementById('lawyer').value;
  const date = document.getElementById('date').value;
  const lang = document.getElementById('language').value;

  let content = '';

  if (lang === 'ur') {
    content = `
      <div style="font-family: 'Noto Nastaliq Urdu', serif; direction: rtl;">
        <h2 style="text-align: center; font-weight: bold;">${court}</h2>
        <p style="text-align: center;"><strong>مقدمہ نمبر:</strong> ${caseNo}</p>
        <h3 style="text-align: center;">${suitType} کا دعویٰ</h3>
        <p><strong>مدعیان:</strong> ${plaintiff}</p>
        <p><strong>مدعا علیہان:</strong> ${defendant}</p>
        <p><strong>اسباب دعویٰ:</strong><br>${cause}</p>
        <p><strong>استدعا:</strong><br>${relief}</p>
        <p><strong>قیمت دعویٰ و عدالت فیس:</strong> ${valuation}</p>
        <br><br>
        <p><strong>وکیل:</strong> ${lawyer}</p>
        <p><strong>تاریخ:</strong> ${date}</p>
        <br>
        <h4 style="text-align:center;">حلف نامہ</h4>
        <p>میں حلفیہ بیان دیتا ہوں کہ اوپر دیا گیا مواد درست اور سچ ہے۔</p>
        <p style="margin-top: 40px;"><strong>دستخط:</strong> __________</p>
      </div>
    `;
  } else {
    content = `
      <div style="font-family: 'Georgia', serif;">
        <h2 style="text-align: center; font-weight: bold;">${court}</h2>
        <p style="text-align: center;"><strong>Case No:</strong> ${caseNo}</p>
        <h3 style="text-align: center; text-decoration: underline;">SUIT FOR ${suitType.toUpperCase()}</h3>
        <p><strong>PLAINTIFF(S):</strong> ${plaintiff}</p>
        <p><strong>DEFENDANT(S):</strong> ${defendant}</p>
        <hr>
        <p><strong>CAUSE OF ACTION:</strong><br>${cause}</p>
        <p><strong>PRAYER / RELIEF SOUGHT:</strong><br>${relief}</p>
        <p><strong>VALUATION & COURT FEE:</strong> ${valuation}</p>
        <br><br>
        <p><strong>Filed by:</strong><br>${lawyer}</p>
        <p><strong>Date:</strong> ${date}</p>
        <br>
        <h4 style="text-align:center;">AFFIDAVIT</h4>
        <p>I solemnly affirm that the contents of the plaint are true and correct to the best of my knowledge and belief.</p>
        <p style="margin-top: 40px;"><strong>Signature:</strong> __________</p>
      </div>
    `;
  }

  const preview = document.getElementById('preview');
  preview.innerHTML = content;
  syncFirebase(preview.textContent);
}
</script>

</html>
