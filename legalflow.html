import re
import spacy

# Load English NLP model
nlp = spacy.load("en_core_web_sm")

# Sample legal draft input (replace with form data input)
plaint_text = """
IN THE COURT OF SENIOR CIVIL JUDGE, MULTAN

CASE NO: 2025-CIV-001

Between:

[PLAINTIFF NAME], S/o [Father's Name], R/o [Address],
                   ............Plaintiff

And

[DEFENDANT NAME], S/o [Father's Name], R/o [Address],
                   ............Defendant

SUIT FOR [Type of Relief â€“ e.g., RECOVERY OF MONEY]

RESPECTED SIR,

1. That the plaintiff is a citizen of Pakistan and a law-abiding individual.
2. That the cause of action arose on [Date] when the defendant [Action â€“ e.g., failed to repay loan].
3. That this Honorable Court has jurisdiction to entertain the present suit.
4. That the value of the suit for the purpose of court fee and jurisdiction is Rs. [Amount] and requisite court fee has been affixed.
5. That the plaintiff respectfully prays for the following relief:

   i.   A decree for Rs. [Amount] against the defendant.
   ii.  Cost of the suit.
   iii. Any other relief deemed just and proper.

6. That the contents of the plaint are true and correct to the best of my knowledge and belief.

Filed by:
[PLAINTIFF NAME]
Through Counsel
[Lawyer's Name & License No]

VERIFICATION:
Verified on oath at Multan this [Date] that the contents of this plaint are true and correct.


AFFIDAVIT:
I, [Plaintiff Name], do hereby state on solemn affirmation that the contents of the accompanying plaint are true and correct.

"""

# Clause patterns for automatic tagging (optional)
clause_keywords = {
    "Cause of Action": r"(?i)cause of action.*",
    "Jurisdiction": r"(?i)jurisdiction.*",
    "Valuation": r"(?i)value of the suit.*",
    "Relief Sought": r"(?i)relief.*",
    "Verification": r"(?i)verification.*",
    "Affidavit": r"(?i)affidavit.*"
}

# Extract sentences
doc = nlp(plaint_text)
sentences = [sent.text.strip() for sent in doc.sents]

# Match clauses
tagged_sections = {}
for clause_type, pattern in clause_keywords.items():
    for sentence in sentences:
        if re.search(pattern, sentence, re.IGNORECASE):
            tagged_sections.setdefault(clause_type, []).append(sentence)

# Display structured document
print("\n" + "="*80)
print("\t\tPLAINT STRUCTURE (Auto-Tagged Sections)")
print("="*80)
for key, values in tagged_sections.items():
    print(f"\nðŸ”· {key}:")
    for val in values:
        print(f"   - {val}")
